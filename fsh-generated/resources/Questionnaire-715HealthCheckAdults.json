{
  "resourceType": "Questionnaire",
  "id": "715HealthCheckAdults",
  "meta": {
    "profile": [
      "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-render",
      "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-modular"
    ]
  },
  "url": "http://www.health.gov.au/assessments/mbs/715/715HealthCheckAdults",
  "extension": [
    {
      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-assemble-expectation",
      "valueCode": "assemble-root"
    },
    {
      "extension": [
        {
          "url": "name",
          "valueCoding": {
            "code": "patient",
            "system": "http://hl7.org/fhir/uv/sdc/CodeSystem/launchContext"
          }
        },
        {
          "url": "type",
          "valueCode": "Patient"
        },
        {
          "url": "description",
          "valueString": "The patient that is to be used to pre-populate the form"
        }
      ],
      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-launchContext"
    },
    {
      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-sourceQueries",
      "valueReference": {
        "reference": "#PrePopQuery"
      }
    }
  ],
  "item": [
    {
      "extension": [
        {
          "url": "http://hl7.org/fhir/StructureDefinition/variable",
          "valueExpression": {
            "name": "weight",
            "language": "text/fhirpath",
            "expression": "item.where(linkId='c587e3b6-b91a-40dc-9a16-179342d001e9').item.where(linkId='ee7a7fe3-cd6a-44c5-97c0-24f777f6dbf7').answer.value"
          }
        },
        {
          "url": "http://hl7.org/fhir/StructureDefinition/variable",
          "valueExpression": {
            "name": "height",
            "language": "text/fhirpath",
            "expression": "item.where(linkId='c587e3b6-b91a-40dc-9a16-179342d001e9').item.where(linkId='2d68889b-88c1-4c6d-8b00-db4178dc1f52').answer.value"
          }
        },
        {
          "url": "http://hl7.org/fhir/StructureDefinition/variable",
          "valueExpression": {
            "name": "female",
            "language": "text/fhirpath",
            "expression": "iif(item.where(linkId='5b224753-9365-44e3-823b-9c17e7394005').item.where(linkId='418e4a02-de77-48a0-a92a-fe8fcc52b1aa').answer.value.code='female', 1, 0)"
          }
        },
        {
          "url": "http://hl7.org/fhir/StructureDefinition/variable",
          "valueExpression": {
            "name": "age",
            "language": "text/fhirpath",
            "expression": "item.where(linkId='c1e0184b-d656-4fab-a478-ca3235ab2c1c').answer.value"
          }
        },
        {
          "url": "http://hl7.org/fhir/StructureDefinition/variable",
          "valueExpression": {
            "name": "cvdAge",
            "language": "text/fhirpath",
            "expression": "iif(%age > 74, 74, iif(%age < 35, 35, %age))"
          }
        },
        {
          "url": "http://hl7.org/fhir/StructureDefinition/variable",
          "valueExpression": {
            "name": "systolicBP",
            "language": "text/fhirpath",
            "expression": "item.where(linkId='d95abe99-8ef2-4b97-bc88-a2901e2ebc9c').item.where(linkId='4b98f514-2f6a-41f3-ad9d-185abc68ae34').answer.value"
          }
        },
        {
          "url": "http://hl7.org/fhir/StructureDefinition/variable",
          "valueExpression": {
            "name": "smoker",
            "language": "text/fhirpath",
            "expression": "iif(item.where(linkId='14a9fb5f-5b0e-4862-b143-08a11cd3ebf0').item.where(linkId='515eda6e-973a-4b10-910a-0d4bf4f2efff').answer.value.code='77176002', 1, 0)"
          }
        },
        {
          "url": "http://hl7.org/fhir/StructureDefinition/variable",
          "valueExpression": {
            "name": "totalCh",
            "language": "text/fhirpath",
            "expression": "item.where(linkId='d95abe99-8ef2-4b97-bc88-a2901e2ebc9c').item.where(linkId='f11feebc-fc4a-40d5-8481-b87d9f5a89aa').answer.value"
          }
        },
        {
          "url": "http://hl7.org/fhir/StructureDefinition/variable",
          "valueExpression": {
            "name": "hdl",
            "language": "text/fhirpath",
            "expression": "item.where(linkId='d95abe99-8ef2-4b97-bc88-a2901e2ebc9c').item.where(linkId='c47a7fae-0c60-40f8-8426-1019b1f0dd8f').answer.value"
          }
        },
        {
          "url": "http://hl7.org/fhir/StructureDefinition/variable",
          "valueExpression": {
            "name": "diabetes",
            "language": "text/fhirpath",
            "expression": "iif(item.where(linkId='d95abe99-8ef2-4b97-bc88-a2901e2ebc9c').item.where(linkId='e8fed84e-6c15-4f62-bc95-cd08033af3f7').answer.value = true,1,0)"
          }
        },
        {
          "url": "http://hl7.org/fhir/StructureDefinition/variable",
          "valueExpression": {
            "name": "ecgLvh",
            "language": "text/fhirpath",
            "expression": "iif(item.where(linkId='d95abe99-8ef2-4b97-bc88-a2901e2ebc9c').item.where(linkId='b980624c-e91a-44d4-80ba-a9f34c0e1188').answer.value = true,1,0)"
          }
        },
        {
          "url": "http://hl7.org/fhir/StructureDefinition/variable",
          "valueExpression": {
            "name": "cBase",
            "language": "text/fhirpath",
            "expression": "18.8144"
          }
        },
        {
          "url": "http://hl7.org/fhir/StructureDefinition/variable",
          "valueExpression": {
            "name": "cFemale",
            "language": "text/fhirpath",
            "expression": "%female * -1.2146"
          }
        },
        {
          "url": "http://hl7.org/fhir/StructureDefinition/variable",
          "valueExpression": {
            "name": "cAge",
            "language": "text/fhirpath",
            "expression": "%cvdAge.ln() * -1.8443"
          }
        },
        {
          "url": "http://hl7.org/fhir/StructureDefinition/variable",
          "valueExpression": {
            "name": "cAgeFemale",
            "language": "text/fhirpath",
            "expression": "%female * %cvdAge.ln() * 0.3668"
          }
        },
        {
          "url": "http://hl7.org/fhir/StructureDefinition/variable",
          "valueExpression": {
            "name": "cSBP",
            "language": "text/fhirpath",
            "expression": "%systolicBP.ln() * -1.4032"
          }
        },
        {
          "url": "http://hl7.org/fhir/StructureDefinition/variable",
          "valueExpression": {
            "name": "cSmoker",
            "language": "text/fhirpath",
            "expression": "%smoker * -0.3899"
          }
        },
        {
          "url": "http://hl7.org/fhir/StructureDefinition/variable",
          "valueExpression": {
            "name": "cTcHdl",
            "language": "text/fhirpath",
            "expression": "(%totalCh / %hdl).ln() * -0.539"
          }
        },
        {
          "url": "http://hl7.org/fhir/StructureDefinition/variable",
          "valueExpression": {
            "name": "cDiabetes",
            "language": "text/fhirpath",
            "expression": "%diabetes * -0.3036"
          }
        },
        {
          "url": "http://hl7.org/fhir/StructureDefinition/variable",
          "valueExpression": {
            "name": "cDiabetesFemale",
            "language": "text/fhirpath",
            "expression": "%female * %diabetes * -0.1697"
          }
        },
        {
          "url": "http://hl7.org/fhir/StructureDefinition/variable",
          "valueExpression": {
            "name": "cEcgLvh",
            "language": "text/fhirpath",
            "expression": "%ecgLvh * -0.3362"
          }
        },
        {
          "url": "http://hl7.org/fhir/StructureDefinition/variable",
          "valueExpression": {
            "name": "sumOfCoeffs",
            "language": "text/fhirpath",
            "expression": "%cBase + %cFemale + %cAge + %cAgeFemale + %cSBP + %cSmoker + %cTcHdl + %cDiabetes + %cDiabetesFemale + %cEcgLvh"
          }
        },
        {
          "url": "http://hl7.org/fhir/StructureDefinition/variable",
          "valueExpression": {
            "name": "cvdScale",
            "language": "text/fhirpath",
            "expression": "(0.6536 + (%sumOfCoeffs * -0.2402)).exp()"
          }
        },
        {
          "url": "http://hl7.org/fhir/StructureDefinition/variable",
          "valueExpression": {
            "name": "cvdU",
            "language": "text/fhirpath",
            "expression": "(5.ln()-%sumOfCoeffs)/%cvdScale"
          }
        },
        {
          "url": "http://hl7.org/fhir/StructureDefinition/variable",
          "valueExpression": {
            "name": "cvdScore",
            "language": "text/fhirpath",
            "expression": "(1 - (%cvdU.exp()*-1).exp()) * 100"
          }
        }
      ],
      "item": [
        {
          "extension": [
            {
              "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
              "valueExpression": {
                "language": "text/fhirpath",
                "expression": "iif(today().toString().substring(4,4).toInteger > %patient.birthDate.toString().substring(4,4).toInteger, today().toString().substring(0,4).toInteger() - %patient.birthDate.toString().substring(0,4).toInteger(), today().toString().substring(0,4).toInteger() - %patient.birthDate.toString().substring(0,4).toInteger() - 1)"
              }
            },
            {
              "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-hidden",
              "valueBoolean": true
            }
          ],
          "linkId": "c1e0184b-d656-4fab-a478-ca3235ab2c1c",
          "text": "Age of patient",
          "type": "integer"
        },
        {
          "extension": [
            {
              "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-subQuestionnaire",
              "valueCanonical": "http://www.health.gov.au/assessments/mbs/715/715-AboutTheHealthCheck|0.1.0"
            }
          ],
          "linkId": "cd3303a6-e3b6-4732-80e8-54d2bd740beb",
          "text": "Sub-questionnaire [http://www.health.gov.au/assessments/mbs/715/715-AboutTheHealthCheck|0.1.0] not available. Unable to display all questions.",
          "type": "display"
        },
        {
          "extension": [
            {
              "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-subQuestionnaire",
              "valueCanonical": "http://www.health.gov.au/assessments/mbs/715/715-Consent|0.1.0"
            }
          ],
          "linkId": "fab52f87-22a6-4a54-9797-0bb6b0f5d2a2",
          "text": "Sub-questionnaire [http://www.health.gov.au/assessments/mbs/715/715-Consent|0.1.0] not available. Unable to display all questions.",
          "type": "display"
        },
        {
          "extension": [
            {
              "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-subQuestionnaire",
              "valueCanonical": "http://www.health.gov.au/assessments/mbs/715/715-PatientDetails|0.1.0"
            }
          ],
          "linkId": "1d10910d-c195-4964-bdc6-98310a44719e",
          "text": "Sub-questionnaire [http://www.health.gov.au/assessments/mbs/715/715-PatientDetails|0.1.0] not available. Unable to display all questions.",
          "type": "display"
        },
        {
          "extension": [
            {
              "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-subQuestionnaire",
              "valueCanonical": "http://www.health.gov.au/assessments/mbs/715/715-Assessment|0.1.0"
            }
          ],
          "linkId": "7692f28c-7c0a-48ea-b27d-a8489974377d",
          "text": "Sub-questionnaire [http://www.health.gov.au/assessments/mbs/715/715-Assessment|0.1.0] not available. Unable to display all questions.",
          "type": "display"
        },
        {
          "extension": [
            {
              "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-subQuestionnaire",
              "valueCanonical": "http://www.health.gov.au/assessments/mbs/715/715-FinalisingHealthCheck|0.1.0"
            }
          ],
          "linkId": "15f83d80-f49a-4852-a20f-18db9b951e53",
          "text": "Sub-questionnaire [http://www.health.gov.au/assessments/mbs/715/715-FinalisingHealthCheck|0.1.0] not available. Unable to display all questions.",
          "type": "display"
        }
      ],
      "linkId": "fd5af92e-c248-497a-8007-ee0952ccd4d9",
      "text": "Aboriginal and Torres Strait Islander health check",
      "type": "group"
    }
  ],
  "contained": [
    {
      "resourceType": "Bundle",
      "id": "PrePopQuery",
      "type": "batch",
      "entry": [
        {
          "fullUrl": "urn:uuid:38a25157-b8e4-42e4-9525-7954fed52553",
          "request": {
            "method": "GET",
            "url": "FamilyMemberHistory?patient={{%patient.id}}"
          }
        },
        {
          "fullUrl": "urn:uuid:38a25157-b8e4-42e4-9525-7954fed52554",
          "request": {
            "method": "GET",
            "url": "Observation?code=72166-2&_count=1&_sort=-date&patient={{%patient.id}}"
          }
        },
        {
          "fullUrl": "urn:uuid:38a25157-b8e4-42e4-9525-7954fed52555",
          "request": {
            "method": "GET",
            "url": "Observation?code=8302-2&_count=1&_sort=-date&patient={{%patient.id}}"
          }
        },
        {
          "fullUrl": "urn:uuid:38a25157-b8e4-42e4-9525-7954fed52556",
          "request": {
            "method": "GET",
            "url": "Observation?code=8280-0&_count=1&_sort=-date&patient={{%patient.id}}"
          }
        },
        {
          "fullUrl": "urn:uuid:38a25157-b8e4-42e4-9525-7954fed52557",
          "request": {
            "method": "GET",
            "url": "Observation?code=29463-7&_count=1&_sort=-date&patient={{%patient.id}}"
          }
        },
        {
          "fullUrl": "urn:uuid:38a25157-b8e4-42e4-9525-7954fed52558",
          "request": {
            "method": "GET",
            "url": "Observation?code=8867-4&_count=1&_sort=-date&patient={{%patient.id}}"
          }
        },
        {
          "fullUrl": "urn:uuid:38a25157-b8e4-42e4-9525-7954fed52559",
          "request": {
            "method": "GET",
            "url": "Observation?code=39156-5&_count=1&_sort=-date&patient={{%patient.id}}"
          }
        },
        {
          "fullUrl": "urn:uuid:38a25157-b8e4-42e4-9525-7954fed52560",
          "request": {
            "method": "GET",
            "url": "Observation?code=85354-9&_count=1&_sort=-date&patient={{%patient.id}}"
          }
        },
        {
          "fullUrl": "urn:uuid:38a25157-b8e4-42e4-9525-7954fed52561",
          "request": {
            "method": "GET",
            "url": "Observation?code=72166-2&_count=1&_sort=-date&patient={{%patient.id}}"
          }
        },
        {
          "fullUrl": "urn:uuid:38a25157-b8e4-42e4-9525-7954fed52562",
          "request": {
            "method": "GET",
            "url": "Observation?code=160625004&_count=1&_sort=-date&patient={{%patient.id}}"
          }
        },
        {
          "fullUrl": "urn:uuid:38a25157-b8e4-42e4-9525-7954fed52563",
          "request": {
            "method": "GET",
            "url": "Observation?code=smoking-date-started&_count=1&_sort=-date&patient={{%patient.id}}"
          }
        },
        {
          "fullUrl": "urn:uuid:38a25157-b8e4-42e4-9525-7954fed52564",
          "request": {
            "method": "GET",
            "url": "Observation?code=229819007&_count=1&_sort=-date&patient={{%patient.id}}"
          }
        },
        {
          "fullUrl": "urn:uuid:38a25157-b8e4-42e4-9525-7954fed52565",
          "request": {
            "method": "GET",
            "url": "Observation?code=160573003&_count=1&_sort=-date&patient={{%patient.id}}"
          }
        },
        {
          "fullUrl": "urn:uuid:38a25157-b8e4-42e4-9525-7954fed52566",
          "request": {
            "method": "GET",
            "url": "Observation?code=228308009&_count=1&_sort=-date&patient={{%patient.id}}"
          }
        },
        {
          "fullUrl": "urn:uuid:38a25157-b8e4-42e4-9525-7954fed52567",
          "request": {
            "method": "GET",
            "url": "Observation?code=1373041000168105&_count=1&_sort=-date&patient={{%patient.id}}"
          }
        },
        {
          "fullUrl": "urn:uuid:38a25157-b8e4-42e4-9525-7954fed52568",
          "request": {
            "method": "GET",
            "url": "Observation?code=160573003&_count=1&_sort=-date&patient={{%patient.id}}"
          }
        },
        {
          "fullUrl": "urn:uuid:38a25157-b8e4-42e4-9525-7954fed52569",
          "request": {
            "method": "GET",
            "url": "Observation?code=60621009&_count=1&_sort=-date&patient={{%patient.id}}"
          }
        },
        {
          "fullUrl": "urn:uuid:38a25157-b8e4-42e4-9525-7954fed52570",
          "request": {
            "method": "GET",
            "url": "Observation?code=absolute-cvd-risk&_count=1&_sort=-date&patient={{%patient.id}}"
          }
        },
        {
          "fullUrl": "urn:uuid:38a25157-b8e4-42e4-9525-7954fed52571",
          "request": {
            "method": "GET",
            "url": "Immunization?patient={{%patient.id}}"
          }
        },
        {
          "fullUrl": "urn:uuid:38a25157-b8e4-42e4-9525-7954fed52572",
          "request": {
            "method": "GET",
            "url": "MedicationStatement?patient={{%patient.id}}"
          }
        },
        {
          "fullUrl": "urn:uuid:38a25157-b8e4-42e4-9525-7954fed52573",
          "request": {
            "method": "GET",
            "url": "AllergyIntolerance?patient={{%patient.id}}"
          }
        },
        {
          "fullUrl": "urn:uuid:38a25157-b8e4-42e4-9525-7954fed52575",
          "request": {
            "method": "GET",
            "url": "Condition?patient={{%patient.id}}"
          }
        },
        {
          "fullUrl": "urn:uuid:38a25157-b8e4-42e4-9525-7954fed52574",
          "request": {
            "method": "GET",
            "url": "DiagnosticReport?patient={{%patient.id}}"
          }
        },
        {
          "fullUrl": "urn:uuid:38a25157-b8e4-42e4-9525-7954fed52576",
          "request": {
            "method": "GET",
            "url": "Observation?code=14647-2&_count=1&_sort=-date&patient={{%patient.id}}"
          }
        },
        {
          "fullUrl": "urn:uuid:38a25157-b8e4-42e4-9525-7954fed52577",
          "request": {
            "method": "GET",
            "url": "Observation?code=14646-4&_count=1&_sort=-date&patient={{%patient.id}}"
          }
        },
        {
          "fullUrl": "urn:uuid:12f24514-437e-40d8-b5c3-bfe8ecb4995d",
          "request": {
            "method": "GET",
            "url": "Observation?code=9843-4&_count=1&_sort=-date&patient={{%patient.id}}"
          }
        }
      ]
    }
  ],
  "name": "715HealthCheckAdults",
  "title": "715 Health Check for Adults",
  "status": "draft",
  "experimental": true,
  "subjectType": [
    "Patient"
  ],
  "date": "2022-05-24",
  "jurisdiction": [
    {
      "coding": [
        {
          "code": "AU",
          "system": "urn:iso:std:iso:3166"
        }
      ]
    }
  ]
}
