{
  "resourceType": "Questionnaire",
  "id": "MedicalHistoryCurrentProblems",
  "meta": {
    "profile": [
      "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-render",
      "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-modular",
      "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-pop-exp"
    ]
  },
  "url": "http://www.health.gov.au/assessments/mbs/715/MedicalHistoryCurrentProblems",
  "title": "Aboriginal and Torres Strait Islander Health Check - Medical History And Current Problems",
  "description": "Medical History sub-questionnaire for Aboriginal and Torres Strait Islander Health Check.",
  "item": [
    {
      "extension": [
        {
          "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-enableWhenExpression",
          "valueExpression": {
            "language": "text/fhirpath",
            "expression": "%age.exists()"
          }
        }
      ],
      "item": [
        {
          "extension": [
            {
              "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
              "valueCodeableConcept": {
                "coding": [
                  {
                    "code": "context-display",
                    "system": "https://smartforms.csiro.au/ig/CodeSystem/QuestionnaireItemControlExtended"
                  }
                ]
              }
            }
          ],
          "linkId": "CD-in-progress-17",
          "text": "In progress",
          "_text": {
            "extension": [
              {
                "url": "http://hl7.org/fhir/StructureDefinition/rendering-xhtml",
                "valueString": "<div title=\"In progress\" xmlns=\"http://www.w3.org/1999/xhtml\">\r\n\t<div style=\"display: flex; flex-direction: row;\">\r\n\t\t<img width='24' height='24' src='data:image/svg+xml;base64,\r\n\t\tPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxZW0iIGhlaWdodD0iMWVtIiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxwYXRoIGZpbGw9IiM3NTc1NzUiIGQ9Im0xNS44NCAxMC4ybC0xLjAxIDEuMDFsLTIuMDctMi4wM2wxLjAxLTEuMDJjLjItLjIxLjU0LS4yMi43OCAwbDEuMjkgMS4yNWMuMjEuMjEuMjIuNTUgMCAuNzlNOCAxMy45MWw0LjE3LTQuMTlsMi4wNyAyLjA4bC00LjE2IDQuMkg4di0yLjA5TTEzIDJ2MmM0LjM5LjU0IDcuNSA0LjUzIDYuOTYgOC45MkE4LjAxNCA4LjAxNCAwIDAgMSAxMyAxOS44OHYyYzUuNS0uNiA5LjQ1LTUuNTQgOC44NS0xMS4wM0MyMS4zMyA2LjE5IDE3LjY2IDIuNSAxMyAybS0yIDBjLTEuOTYuMTgtMy44MS45NS01LjMzIDIuMkw3LjEgNS43NGMxLjEyLS45IDIuNDctMS40OCAzLjktMS42OHYtMk00LjI2IDUuNjdBOS44MSA5LjgxIDAgMCAwIDIuMDUgMTFoMmMuMTktMS40Mi43NS0yLjc3IDEuNjQtMy45TDQuMjYgNS42N00yLjA2IDEzYy4yIDEuOTYuOTcgMy44MSAyLjIxIDUuMzNsMS40Mi0xLjQzQTguMDAyIDguMDAyIDAgMCAxIDQuMDYgMTNoLTJtNSA1LjM3bC0xLjM5IDEuMzdBOS45OTQgOS45OTQgMCAwIDAgMTEgMjJ2LTJhOC4wMDIgOC4wMDIgMCAwIDEtMy45LTEuNjNoLS4wNFoiLz48L3N2Zz4=' \r\n\t\tstyle=\"align-self: center;\"/>\r\n\t</div>\r\n</div>"
              }
            ]
          },
          "type": "display",
          "enableWhen": [
            {
              "question": "MarkComplete-17",
              "operator": "=",
              "answerBoolean": false
            }
          ]
        },
        {
          "extension": [
            {
              "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
              "valueCodeableConcept": {
                "coding": [
                  {
                    "code": "context-display",
                    "system": "https://smartforms.csiro.au/ig/CodeSystem/QuestionnaireItemControlExtended"
                  }
                ]
              }
            }
          ],
          "linkId": "CD-complete-17",
          "text": "Complete",
          "_text": {
            "extension": [
              {
                "url": "http://hl7.org/fhir/StructureDefinition/rendering-xhtml",
                "valueString": "<div title=\"Section completed\" xmlns=\"http://www.w3.org/1999/xhtml\">\r\n\t<div style=\"display: flex; flex-direction: row;\">\r\n\t\t<img width='24' height='24' src='data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxZW0iIGhlaWdodD0iMWVtIiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxwYXRoIGZpbGw9IiMyZTdkMzIiIGQ9Ik0yMCAxMmE4IDggMCAwIDEtOCA4YTggOCAwIDAgMS04LThhOCA4IDAgMCAxIDgtOGMuNzYgMCAxLjUuMTEgMi4yLjMxbDEuNTctMS41N0E5LjgyMiA5LjgyMiAwIDAgMCAxMiAyQTEwIDEwIDAgMCAwIDIgMTJhMTAgMTAgMCAwIDAgMTAgMTBhMTAgMTAgMCAwIDAgMTAtMTBNNy45MSAxMC4wOEw2LjUgMTEuNUwxMSAxNkwyMSA2bC0xLjQxLTEuNDJMMTEgMTMuMTdsLTMuMDktMy4wOVoiLz48L3N2Zz4='\r\n\t\tstyle=\"align-self: center;\"/>\r\n\t</div>\r\n</div>\r\n"
              }
            ]
          },
          "type": "display",
          "enableWhen": [
            {
              "question": "MarkComplete-17",
              "operator": "=",
              "answerBoolean": true
            }
          ]
        },
        {
          "linkId": "RecordUpdate-MedHistory",
          "text": "Important: The patient record may not be updated with information entered here. Information intended for the patient record should be entered there first.",
          "_text": {
            "extension": [
              {
                "url": "http://hl7.org/fhir/StructureDefinition/rendering-xhtml",
                "valueString": "<div xmlns=\"http://www.w3.org/1999/xhtml\">\r\n    <strong>Important:</strong> <em>The patient record may not be updated with information entered here. Information intended for the patient record should be entered there first.</em>\r\n    </div>"
              }
            ]
          },
          "type": "display"
        },
        {
          "extension": [
            {
              "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-enableWhenExpression",
              "valueExpression": {
                "language": "text/fhirpath",
                "expression": "%age <= 5"
              }
            },
            {
              "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-unit",
              "valueCoding": {
                "code": "wk",
                "system": "http://unitsofmeasure.org"
              }
            }
          ],
          "item": [
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                  "valueCodeableConcept": {
                    "coding": [
                      {
                        "code": "unit",
                        "system": "http://hl7.org/fhir/questionnaire-item-control"
                      }
                    ]
                  }
                }
              ],
              "linkId": "f3899852-36c4-441f-9a7d-544ef1617f08",
              "text": "weeks",
              "type": "display"
            }
          ],
          "linkId": "a10a7375-e9d3-4e71-a47a-282e9ba38ec1",
          "text": "Gestation at birth",
          "type": "decimal",
          "repeats": false
        },
        {
          "extension": [
            {
              "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-enableWhenExpression",
              "valueExpression": {
                "language": "text/fhirpath",
                "expression": "%age <= 5"
              }
            },
            {
              "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-unit",
              "valueCoding": {
                "code": "kg",
                "system": "http://unitsofmeasure.org"
              }
            }
          ],
          "item": [
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                  "valueCodeableConcept": {
                    "coding": [
                      {
                        "code": "unit",
                        "system": "http://hl7.org/fhir/questionnaire-item-control"
                      }
                    ]
                  }
                }
              ],
              "linkId": "87cf1ecd-6d1b-4de1-894d-58bd77dcfde1",
              "text": "kg",
              "type": "display"
            }
          ],
          "linkId": "29b6d8ea-23b2-4a69-98d9-899198692de7",
          "text": "Birth weight",
          "type": "decimal",
          "repeats": false
        },
        {
          "extension": [
            {
              "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
              "valueCodeableConcept": {
                "coding": [
                  {
                    "code": "gtable",
                    "system": "http://hl7.org/fhir/questionnaire-item-control"
                  }
                ]
              }
            },
            {
              "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-itemPopulationContext",
              "valueExpression": {
                "name": "ConditionRepeat",
                "language": "text/fhirpath",
                "expression": "%Condition.entry.resource.where(category.coding.code='problem-list-item')"
              }
            }
          ],
          "item": [
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                  "valueCodeableConcept": {
                    "coding": [
                      {
                        "code": "autocomplete",
                        "system": "http://hl7.org/fhir/questionnaire-item-control"
                      }
                    ]
                  }
                },
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                  "valueExpression": {
                    "language": "text/fhirpath",
                    "expression": "%ConditionRepeat.code.select((coding.where(system='http://snomed.info/sct') | coding.where(system!='http://snomed.info/sct').first() | text ).first())"
                  }
                }
              ],
              "linkId": "59b1900a-4f85-4a8c-b9cd-3fe2fd76f27e",
              "text": "Condition",
              "type": "open-choice",
              "answerValueSet": "#MedicalHistory"
            },
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                  "valueCodeableConcept": {
                    "coding": [
                      {
                        "code": "drop-down",
                        "system": "http://hl7.org/fhir/questionnaire-item-control"
                      }
                    ]
                  }
                },
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                  "valueExpression": {
                    "language": "text/fhirpath",
                    "expression": "%ConditionRepeat.clinicalStatus.coding"
                  }
                }
              ],
              "linkId": "88bcfad7-386b-4d87-b34b-2e50482e4d2c",
              "text": "Clinical Status",
              "type": "choice",
              "answerValueSet": "http://hl7.org/fhir/ValueSet/condition-clinical"
            },
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                  "valueExpression": {
                    "language": "text/fhirpath",
                    "expression": "%ConditionRepeat.onset.ofType(dateTime)"
                  }
                }
              ],
              "linkId": "6ae641ad-95bb-4cdc-8910-5a52077e492c",
              "text": "Onset Date",
              "type": "date"
            },
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                  "valueExpression": {
                    "language": "text/fhirpath",
                    "expression": "%ConditionRepeat.recordedDate"
                  }
                }
              ],
              "linkId": "18b9e159-2ed7-4047-82b7-deb2a171de4f",
              "text": "Recorded Date",
              "type": "date"
            }
          ],
          "linkId": "92bd7d05-9b5e-4cf9-900b-703f361dad9d",
          "text": "Medical history and current problems list",
          "_text": {
            "extension": [
              {
                "url": "http://hl7.org/fhir/StructureDefinition/rendering-xhtml",
                "valueString": "<div xmlns=\"http://www.w3.org/1999/xhtml\">\r\n    <p>Medical history and current problems list</p>\r\n    <p style=\"font-size:0.9em; font-weight:normal\"><em>This list includes items from the clinical record. If you wish to enter additional diagnoses, either update the clinical record and repopulate this form or add them to the \"New diagnoses list\" below and later update the clinical record as required.</em></p>\r\n    </div>"
              }
            ]
          },
          "type": "group",
          "repeats": true
        },
        {
          "extension": [
            {
              "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
              "valueCodeableConcept": {
                "coding": [
                  {
                    "code": "gtable",
                    "system": "http://hl7.org/fhir/questionnaire-item-control"
                  }
                ]
              }
            }
          ],
          "item": [
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                  "valueCodeableConcept": {
                    "coding": [
                      {
                        "code": "autocomplete",
                        "system": "http://hl7.org/fhir/questionnaire-item-control"
                      }
                    ]
                  }
                }
              ],
              "linkId": "2da85994-2d5e-42f1-8a81-abf44f397468",
              "text": "Condition",
              "type": "open-choice",
              "answerValueSet": "#MedicalHistory"
            },
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                  "valueCodeableConcept": {
                    "coding": [
                      {
                        "code": "drop-down",
                        "system": "http://hl7.org/fhir/questionnaire-item-control"
                      }
                    ]
                  }
                }
              ],
              "linkId": "a7e056be-fb6f-4f7f-b04d-5b809e1e18e3",
              "text": "Clinical Status",
              "type": "choice",
              "answerValueSet": "http://hl7.org/fhir/ValueSet/condition-clinical"
            },
            {
              "linkId": "e4524654-f6de-4717-b288-34919394d46b",
              "text": "Onset Date",
              "type": "date"
            },
            {
              "linkId": "5bc1d8f4-6e8c-4695-916c-1ef767306e46",
              "text": "Recorded Date",
              "type": "date"
            }
          ],
          "linkId": "4484cacd-a260-4e5f-83c1-168ca2396c04",
          "text": "New diagnoses list",
          "type": "group",
          "repeats": true
        },
        {
          "linkId": "62774152-8a6e-4449-af9f-87bdce8b9bf5",
          "text": "Health priorities, actions and follow-up",
          "type": "text",
          "repeats": false
        },
        {
          "linkId": "MarkComplete-17",
          "text": "Mark section as complete",
          "_text": {
            "extension": [
              {
                "url": "http://hl7.org/fhir/StructureDefinition/rendering-xhtml",
                "valueString": "<div xmlns=\"http://www.w3.org/1999/xhtml\">\r\n<head>\r\n    <style type=\"text/css\">\r\n        .alert {\r\n            padding: 0.875rem;\r\n            margin-bottom: 1rem;\r\n            font-size: 0.875rem;\r\n            color: #2E7D32;\r\n            border-radius: 0.5rem;\r\n            background-color: #d5e5d6;\r\n            font-weight: 700;\r\n        }\r\n    </style>\r\n</head>\r\n<body>\r\n<div class=\"alert\">Mark section as complete</div>\r\n</body>\r\n</div>"
              }
            ]
          },
          "type": "boolean",
          "repeats": false
        }
      ],
      "linkId": "28d5dbe4-1e65-487c-847a-847f544a6a91",
      "text": "Medical history and current problems",
      "type": "group",
      "repeats": false
    }
  ],
  "contained": [
    {
      "resourceType": "ValueSet",
      "id": "MedicalHistory",
      "status": "draft",
      "name": "MedicalHistory",
      "title": "Medical History",
      "description": "The Medical History value set includes values that may be used to represent medical history, operations and hospital admissions.",
      "url": "https://smartforms.csiro.au/ig/ValueSet/MedicalHistory",
      "experimental": false,
      "compose": {
        "include": [
          {
            "system": "http://snomed.info/sct",
            "filter": [
              {
                "property": "constraint",
                "op": "=",
                "value": "^32570581000036105|Problem/Diagnosis reference set| OR ^32570141000036105|Procedure foundation reference set|"
              }
            ]
          }
        ]
      }
    },
    {
      "resourceType": "ValueSet",
      "id": "condition-clinical",
      "meta": {
        "profile": [
          "http://hl7.org/fhir/StructureDefinition/shareablevalueset"
        ]
      },
      "status": "draft",
      "name": "ConditionClinicalStatusCodes",
      "title": "Condition Clinical Status Codes",
      "description": "Preferred value set for Condition Clinical Status.",
      "url": "http://hl7.org/fhir/ValueSet/condition-clinical",
      "extension": [
        {
          "url": "http://hl7.org/fhir/StructureDefinition/structuredefinition-wg",
          "valueCode": "pc"
        },
        {
          "url": "http://hl7.org/fhir/StructureDefinition/structuredefinition-standards-status",
          "valueCode": "trial-use"
        },
        {
          "url": "http://hl7.org/fhir/StructureDefinition/structuredefinition-fmm",
          "valueInteger": 3
        }
      ],
      "identifier": [
        {
          "system": "urn:ietf:rfc:3986",
          "value": "urn:oid:2.16.840.1.113883.4.642.3.164"
        }
      ],
      "version": "4.3.0",
      "experimental": false,
      "publisher": "FHIR Project team",
      "contact": [
        {
          "telecom": [
            {
              "system": "url",
              "value": "http://hl7.org/fhir"
            }
          ]
        }
      ],
      "copyright": "Copyright © 2011+ HL7. Creative Commons 'No Rights Reserved' (CC0)",
      "expansion": {
        "identifier": "5d4bed14-061a-42c4-853d-e6a624c4f483",
        "timestamp": "2022-10-20T09:32:48+10:00",
        "total": 6,
        "offset": 0,
        "parameter": [
          {
            "name": "version",
            "valueUri": "http://terminology.hl7.org/CodeSystem/condition-clinical|4.0.1"
          },
          {
            "name": "count",
            "valueInteger": 2147483647
          },
          {
            "name": "offset",
            "valueInteger": 0
          }
        ],
        "contains": [
          {
            "system": "http://terminology.hl7.org/CodeSystem/condition-clinical",
            "code": "active",
            "display": "Active"
          },
          {
            "system": "http://terminology.hl7.org/CodeSystem/condition-clinical",
            "code": "inactive",
            "display": "Inactive"
          },
          {
            "system": "http://terminology.hl7.org/CodeSystem/condition-clinical",
            "code": "recurrence",
            "display": "Recurrence"
          },
          {
            "system": "http://terminology.hl7.org/CodeSystem/condition-clinical",
            "code": "relapse",
            "display": "Relapse"
          },
          {
            "system": "http://terminology.hl7.org/CodeSystem/condition-clinical",
            "code": "remission",
            "display": "Remission"
          },
          {
            "system": "http://terminology.hl7.org/CodeSystem/condition-clinical",
            "code": "resolved",
            "display": "Resolved"
          }
        ]
      },
      "compose": {
        "include": [
          {
            "system": "http://terminology.hl7.org/CodeSystem/condition-clinical"
          }
        ]
      }
    }
  ],
  "extension": [
    {
      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-assemble-expectation",
      "valueCode": "assemble-child"
    },
    {
      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-launchContext",
      "extension": [
        {
          "url": "name",
          "valueCoding": {
            "code": "patient",
            "system": "http://hl7.org/fhir/uv/sdc/CodeSystem/launchContext"
          }
        },
        {
          "url": "type",
          "valueCode": "Patient"
        },
        {
          "url": "description",
          "valueString": "The patient that is to be used to pre-populate the form"
        }
      ]
    },
    {
      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-launchContext",
      "extension": [
        {
          "url": "name",
          "valueCoding": {
            "code": "user",
            "system": "http://hl7.org/fhir/uv/sdc/CodeSystem/launchContext"
          }
        },
        {
          "url": "type",
          "valueCode": "Practitioner"
        },
        {
          "url": "description",
          "valueString": "The practitioner user that is to be used to pre-populate the form"
        }
      ]
    },
    {
      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-assembleContext",
      "valueString": "age"
    },
    {
      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-assembleContext",
      "valueString": "Condition"
    }
  ],
  "name": "MedicalHistoryCurrentProblems",
  "status": "draft",
  "experimental": false,
  "subjectType": [
    "Patient"
  ],
  "date": "2022-05-24",
  "jurisdiction": [
    {
      "coding": [
        {
          "code": "AU",
          "system": "urn:iso:std:iso:3166"
        }
      ]
    }
  ]
}
