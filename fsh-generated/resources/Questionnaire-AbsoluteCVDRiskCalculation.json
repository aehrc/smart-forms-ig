{
  "resourceType": "Questionnaire",
  "id": "AbsoluteCVDRiskCalculation",
  "meta": {
    "profile": [
      "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-render",
      "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-modular",
      "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-pop-exp",
      "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-behave"
    ]
  },
  "item": [
    {
      "extension": [
        {
          "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-enableWhenExpression",
          "valueExpression": {
            "language": "text/fhirpath",
            "expression": "%age >= 25"
          }
        }
      ],
      "item": [
        {
          "extension": [
            {
              "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
              "valueCodeableConcept": {
                "coding": [
                  {
                    "code": "context-display",
                    "system": "https://smartforms.csiro.au/ig/CodeSystem/QuestionnaireItemControlExtended"
                  }
                ]
              }
            }
          ],
          "linkId": "CD-in-progress-2",
          "text": "In progress",
          "_text": {
            "extension": [
              {
                "url": "http://hl7.org/fhir/StructureDefinition/rendering-xhtml",
                "valueString": "<div title=\"In progress\" xmlns=\"http://www.w3.org/1999/xhtml\">\r\n\t<div style=\"display: flex; flex-direction: row;\">\r\n\t\t<img width='24' height='24' src='data:image/svg+xml;base64,\r\n\t\tPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxZW0iIGhlaWdodD0iMWVtIiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxwYXRoIGZpbGw9IiM3NTc1NzUiIGQ9Im0xNS44NCAxMC4ybC0xLjAxIDEuMDFsLTIuMDctMi4wM2wxLjAxLTEuMDJjLjItLjIxLjU0LS4yMi43OCAwbDEuMjkgMS4yNWMuMjEuMjEuMjIuNTUgMCAuNzlNOCAxMy45MWw0LjE3LTQuMTlsMi4wNyAyLjA4bC00LjE2IDQuMkg4di0yLjA5TTEzIDJ2MmM0LjM5LjU0IDcuNSA0LjUzIDYuOTYgOC45MkE4LjAxNCA4LjAxNCAwIDAgMSAxMyAxOS44OHYyYzUuNS0uNiA5LjQ1LTUuNTQgOC44NS0xMS4wM0MyMS4zMyA2LjE5IDE3LjY2IDIuNSAxMyAybS0yIDBjLTEuOTYuMTgtMy44MS45NS01LjMzIDIuMkw3LjEgNS43NGMxLjEyLS45IDIuNDctMS40OCAzLjktMS42OHYtMk00LjI2IDUuNjdBOS44MSA5LjgxIDAgMCAwIDIuMDUgMTFoMmMuMTktMS40Mi43NS0yLjc3IDEuNjQtMy45TDQuMjYgNS42N00yLjA2IDEzYy4yIDEuOTYuOTcgMy44MSAyLjIxIDUuMzNsMS40Mi0xLjQzQTguMDAyIDguMDAyIDAgMCAxIDQuMDYgMTNoLTJtNSA1LjM3bC0xLjM5IDEuMzdBOS45OTQgOS45OTQgMCAwIDAgMTEgMjJ2LTJhOC4wMDIgOC4wMDIgMCAwIDEtMy45LTEuNjNoLS4wNFoiLz48L3N2Zz4=' \r\n\t\tstyle=\"align-self: center;\"/>\r\n\t</div>\r\n</div>"
              }
            ]
          },
          "type": "display",
          "enableWhen": [
            {
              "question": "MarkComplete-2",
              "operator": "!=",
              "answerBoolean": true
            }
          ]
        },
        {
          "extension": [
            {
              "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
              "valueCodeableConcept": {
                "coding": [
                  {
                    "code": "context-display",
                    "system": "https://smartforms.csiro.au/ig/CodeSystem/QuestionnaireItemControlExtended"
                  }
                ]
              }
            }
          ],
          "linkId": "CD-complete-2",
          "text": "Complete",
          "_text": {
            "extension": [
              {
                "url": "http://hl7.org/fhir/StructureDefinition/rendering-xhtml",
                "valueString": "<div title=\"Section completed\" xmlns=\"http://www.w3.org/1999/xhtml\">\r\n\t<div style=\"display: flex; flex-direction: row;\">\r\n\t\t<img width='24' height='24' src='data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxZW0iIGhlaWdodD0iMWVtIiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxwYXRoIGZpbGw9IiMyZTdkMzIiIGQ9Ik0yMCAxMmE4IDggMCAwIDEtOCA4YTggOCAwIDAgMS04LThhOCA4IDAgMCAxIDgtOGMuNzYgMCAxLjUuMTEgMi4yLjMxbDEuNTctMS41N0E5LjgyMiA5LjgyMiAwIDAgMCAxMiAyQTEwIDEwIDAgMCAwIDIgMTJhMTAgMTAgMCAwIDAgMTAgMTBhMTAgMTAgMCAwIDAgMTAtMTBNNy45MSAxMC4wOEw2LjUgMTEuNUwxMSAxNkwyMSA2bC0xLjQxLTEuNDJMMTEgMTMuMTdsLTMuMDktMy4wOVoiLz48L3N2Zz4='\r\n\t\tstyle=\"align-self: center;\"/>\r\n\t</div>\r\n</div>"
              }
            ]
          },
          "type": "display",
          "enableWhen": [
            {
              "question": "MarkComplete-2",
              "operator": "=",
              "answerBoolean": true
            }
          ]
        },
        {
          "linkId": "Guidance-CVDRisk",
          "text": "The Australian guideline for assessing and managing cardiovascular disease risk recommends the use of the Aus CVD Risk calculator.",
          "_text": {
            "extension": [
              {
                "url": "http://hl7.org/fhir/StructureDefinition/rendering-xhtml",
                "valueString": "<div xmlns=\"http://www.w3.org/1999/xhtml\"><p style=\"font-size:1.1em;\">The Australian guideline for assessing and managing cardiovascular disease risk recommends the use of the Aus&nbsp;CVD&nbsp;Risk calculator.</p></div>"
              }
            ]
          },
          "type": "display"
        },
        {
          "item": [
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                  "valueExpression": {
                    "language": "text/fhirpath",
                    "expression": "iif(%CVDRiskResultValue.exists() and %CVDRiskResultDateFormatted.exists(), %CVDRiskResultValue + ' ( ' + %CVDRiskResultDateFormatted + ' )', 'Not available')"
                  }
                }
              ],
              "linkId": "cvdrisk-latestresult",
              "text": "Latest available result",
              "type": "string",
              "repeats": false,
              "readOnly": true
            },
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-enableWhenExpression",
                  "valueExpression": {
                    "language": "text/fhirpath",
                    "expression": "%CVDRiskResultValue.exists() and %CVDRiskResultDateFormatted.exists()"
                  }
                }
              ],
              "linkId": "cvdrisk-newassessmentquestion",
              "text": "A previous CVD risk result has been found. Do you want to perform a new assessment?",
              "type": "boolean",
              "repeats": false
            },
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-enableWhenExpression",
                  "valueExpression": {
                    "language": "text/fhirpath",
                    "expression": "%NewAssessmentQuestionAnswer = true or %CVDRiskResultValue.empty() or %CVDRiskResultDateFormatted.empty()"
                  }
                }
              ],
              "linkId": "cvdrisk-auscvdriskiaccess",
              "text": "Do you have access to the Aus CVD Risk-i application from your clinical system?",
              "_text": {
                "extension": [
                  {
                    "url": "http://hl7.org/fhir/StructureDefinition/rendering-xhtml",
                    "valueString": "<div xmlns=\"http://www.w3.org/1999/xhtml\"><p>Do you have access to the <em>Aus&nbsp;CVD&nbsp;Risk&#8209;i</em> application from your clinical system?</p></div>"
                  }
                ]
              },
              "type": "boolean",
              "repeats": false
            },
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-enableWhenExpression",
                  "valueExpression": {
                    "language": "text/fhirpath",
                    "expression": "%AusCVDRiskiAccessAnswer = true"
                  }
                }
              ],
              "linkId": "cvdrisk-auscvdriskiguidance",
              "text": "Using the Aus CVD Risk-i application, calculate the CVD risk result and save it to the patient record. This form can then be repopulated to retrieve and include the result above.",
              "_text": {
                "extension": [
                  {
                    "url": "http://hl7.org/fhir/StructureDefinition/rendering-xhtml",
                    "valueString": "<div xmlns=\"http://www.w3.org/1999/xhtml\"><p style=\"font-size:1.1em;\">Using the <em>Aus&nbsp;CVD&nbsp;Risk&#8209;i</em> application, calculate the CVD risk result and save it to the patient record. This form can then be repopulated to retrieve and include the result above.</p></div>"
                  }
                ]
              },
              "type": "display"
            },
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-enableWhenExpression",
                  "valueExpression": {
                    "language": "text/fhirpath",
                    "expression": "%AusCVDRiskiAccessAnswer = true"
                  }
                }
              ],
              "linkId": "cvdrisk-repopulateoverride",
              "text": "Do you need to manually enter a new CVD risk result instead of repopulating?",
              "type": "boolean",
              "repeats": false
            },
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-enableWhenExpression",
                  "valueExpression": {
                    "language": "text/fhirpath",
                    "expression": "%AusCVDRiskiAccessAnswer != true or %RepopulateOverrideAnswer = true"
                  }
                }
              ],
              "item": [
                {
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-enableWhenExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "%AusCVDRiskiAccessAnswer != true"
                      }
                    }
                  ],
                  "linkId": "cvdrisk-onlincecalculatorguidance",
                  "text": "Use the online Australian CVD risk calculator - https://www.cvdcheck.org.au/calculator",
                  "_text": {
                    "extension": [
                      {
                        "url": "http://hl7.org/fhir/StructureDefinition/rendering-xhtml",
                        "valueString": "<div xmlns=\"http://www.w3.org/1999/xhtml\"><p>The <a href=\"https://www.cvdcheck.org.au/calculator\" target=\"_blank\">Australian CVD risk calculator</a> on the Aus&nbsp;CVD&nbsp;Risk website should be used. Below is a read only view of a subset of variables that can be used as inputs for the online calculator. The calculated CVD risk result can be entered here.</p></div>"
                      }
                    ]
                  },
                  "type": "display"
                },
                {
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-unit",
                      "valueCoding": {
                        "code": "%",
                        "system": "http://unitsofmeasure.org"
                      }
                    }
                  ],
                  "item": [
                    {
                      "extension": [
                        {
                          "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                          "valueCodeableConcept": {
                            "coding": [
                              {
                                "code": "unit",
                                "system": "http://hl7.org/fhir/questionnaire-item-control"
                              }
                            ]
                          }
                        }
                      ],
                      "linkId": "0162854e-c124-4b58-acd9-93c17562d407",
                      "text": "%",
                      "type": "display"
                    }
                  ],
                  "linkId": "4c52fcec-0695-4916-b185-24a5c2711631",
                  "text": "Risk result score",
                  "type": "integer",
                  "repeats": false
                },
                {
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                      "valueCodeableConcept": {
                        "coding": [
                          {
                            "code": "radio-button",
                            "system": "http://hl7.org/fhir/questionnaire-item-control"
                          }
                        ]
                      }
                    }
                  ],
                  "linkId": "28ff9463-b77f-435d-9ba7-427682a61f96",
                  "text": "Assessed risk category",
                  "type": "choice",
                  "repeats": false,
                  "answerOption": [
                    {
                      "valueString": "High Risk"
                    },
                    {
                      "valueString": "Intermediate Risk"
                    },
                    {
                      "valueString": "Low Risk"
                    }
                  ]
                }
              ],
              "linkId": "cvdrisk-cvdriskresultgroup",
              "text": "New CVD risk result",
              "type": "group",
              "repeats": false
            }
          ],
          "linkId": "dabdc7b4-51db-44a0-9d59-77a88587cbe9",
          "text": "CVD risk result",
          "type": "group",
          "repeats": false
        },
        {
          "item": [
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-calculatedExpression",
                  "valueExpression": {
                    "description": "CVD Risk Age",
                    "language": "text/fhirpath",
                    "expression": "%age"
                  }
                },
                {
                  "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-unit",
                  "valueCoding": {
                    "code": "a",
                    "system": "http://unitsofmeasure.org"
                  }
                }
              ],
              "item": [
                {
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                      "valueCodeableConcept": {
                        "coding": [
                          {
                            "code": "unit",
                            "system": "http://hl7.org/fhir/questionnaire-item-control"
                          }
                        ]
                      }
                    }
                  ],
                  "linkId": "b9aba16c-f910-4948-9267-e07851f69572",
                  "text": "years",
                  "type": "display"
                }
              ],
              "linkId": "6909cb38-a6f4-44c9-abae-0e5d697a21f5",
              "text": "Age",
              "type": "integer"
            },
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-calculatedExpression",
                  "valueExpression": {
                    "description": "CVD Risk Sex At Birth",
                    "language": "text/fhirpath",
                    "expression": "%SexAtBirthCoding"
                  }
                }
              ],
              "linkId": "3dbb0e63-3b28-4567-8ef3-bac242fd95f6",
              "text": "Sex at birth",
              "type": "choice",
              "repeats": false,
              "answerValueSet": "#biological-sex-1"
            },
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                  "valueCodeableConcept": {
                    "coding": [
                      {
                        "code": "grid",
                        "system": "http://hl7.org/fhir/questionnaire-item-control"
                      }
                    ]
                  }
                }
              ],
              "item": [
                {
                  "item": [
                    {
                      "extension": [
                        {
                          "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                          "valueExpression": {
                            "language": "text/fhirpath",
                            "expression": "%ObsTobaccoSmokingStatusLatest.value.coding.where(system='http://snomed.info/sct').first()"
                          }
                        }
                      ],
                      "linkId": "333007c7-47a9-482b-af11-e55484abf2ae",
                      "text": "Value",
                      "type": "choice",
                      "repeats": false,
                      "answerOption": [
                        {
                          "valueCoding": {
                            "code": "266919005",
                            "system": "http://snomed.info/sct",
                            "display": "Lifetime non-smoker"
                          }
                        },
                        {
                          "valueCoding": {
                            "code": "77176002",
                            "system": "http://snomed.info/sct",
                            "display": "Current smoker"
                          }
                        },
                        {
                          "valueCoding": {
                            "code": "8517006",
                            "system": "http://snomed.info/sct",
                            "display": "Ex-smoker"
                          }
                        },
                        {
                          "valueCoding": {
                            "code": "16090371000119103",
                            "system": "http://snomed.info/sct",
                            "display": "Exposure to second hand tobacco smoke"
                          }
                        },
                        {
                          "valueString": "Wants to quit"
                        },
                        {
                          "valueString": "Other tobacco use"
                        }
                      ]
                    },
                    {
                      "extension": [
                        {
                          "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                          "valueExpression": {
                            "language": "text/fhirpath",
                            "expression": "%ObsTobaccoSmokingStatusLatest.effective"
                          }
                        }
                      ],
                      "linkId": "cvdrisk-smokingstatus-date",
                      "text": "Date performed",
                      "type": "date",
                      "repeats": false
                    }
                  ],
                  "linkId": "bac0f824-3784-400e-80f9-ad18d46bd8cb",
                  "text": "Smoking status",
                  "type": "group",
                  "repeats": false
                },
                {
                  "item": [
                    {
                      "extension": [
                        {
                          "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                          "valueExpression": {
                            "language": "text/fhirpath",
                            "expression": "%ObsBloodPressureLatest.component.where(code.coding.exists(code='8480-6')).value.value"
                          }
                        },
                        {
                          "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-unit",
                          "valueCoding": {
                            "code": "mm[Hg]",
                            "system": "http://unitsofmeasure.org"
                          }
                        }
                      ],
                      "item": [
                        {
                          "extension": [
                            {
                              "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                              "valueCodeableConcept": {
                                "coding": [
                                  {
                                    "code": "unit",
                                    "system": "http://hl7.org/fhir/questionnaire-item-control"
                                  }
                                ]
                              }
                            }
                          ],
                          "linkId": "ddea5a62-a8c1-4b15-b667-7b69babec8cd",
                          "text": "mm Hg",
                          "type": "display"
                        }
                      ],
                      "linkId": "818ce640-c8dd-457d-b607-3aaa8da38524",
                      "text": "Value",
                      "type": "integer",
                      "repeats": false
                    },
                    {
                      "extension": [
                        {
                          "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                          "valueExpression": {
                            "language": "text/fhirpath",
                            "expression": "%ObsBloodPressureLatest.effective"
                          }
                        }
                      ],
                      "linkId": "85d8faf7-ddb0-446c-b489-28d786d6de50",
                      "text": "Date performed",
                      "type": "date",
                      "repeats": false
                    }
                  ],
                  "linkId": "fa4f73a3-7633-410c-9177-8aa43b117122",
                  "text": "Systolic Blood Pressure",
                  "type": "group",
                  "repeats": false
                },
                {
                  "item": [
                    {
                      "extension": [
                        {
                          "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                          "valueExpression": {
                            "language": "text/fhirpath",
                            "expression": "%ObsTotalCholesterolLatest.value.value"
                          }
                        },
                        {
                          "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-unit",
                          "valueCoding": {
                            "code": "mmol/L",
                            "system": "http://unitsofmeasure.org"
                          }
                        }
                      ],
                      "item": [
                        {
                          "extension": [
                            {
                              "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                              "valueCodeableConcept": {
                                "coding": [
                                  {
                                    "code": "unit",
                                    "system": "http://hl7.org/fhir/questionnaire-item-control"
                                  }
                                ]
                              }
                            }
                          ],
                          "linkId": "fcfbfc9f-e400-4aae-993f-ea54096e7361",
                          "text": "mmol/L",
                          "type": "display"
                        }
                      ],
                      "linkId": "99932a93-8135-47b2-933b-fd751b34b7af",
                      "text": "Value",
                      "type": "decimal",
                      "repeats": false
                    },
                    {
                      "extension": [
                        {
                          "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                          "valueExpression": {
                            "language": "text/fhirpath",
                            "expression": "%ObsTotalCholesterolLatest.effective"
                          }
                        }
                      ],
                      "linkId": "16cbe87b-5c8d-4385-b7d9-da3f07f63f8a",
                      "text": "Date performed",
                      "type": "date",
                      "repeats": false
                    }
                  ],
                  "linkId": "e693c7d2-be69-4f1f-b72d-7ff2ea3cd536",
                  "text": "Total Cholesterol",
                  "type": "group",
                  "repeats": false
                },
                {
                  "item": [
                    {
                      "extension": [
                        {
                          "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                          "valueExpression": {
                            "language": "text/fhirpath",
                            "expression": "%ObsHDLCholesterolLatest.value.value"
                          }
                        },
                        {
                          "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-unit",
                          "valueCoding": {
                            "code": "mmol/L",
                            "system": "http://unitsofmeasure.org"
                          }
                        }
                      ],
                      "item": [
                        {
                          "extension": [
                            {
                              "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                              "valueCodeableConcept": {
                                "coding": [
                                  {
                                    "code": "unit",
                                    "system": "http://hl7.org/fhir/questionnaire-item-control"
                                  }
                                ]
                              }
                            }
                          ],
                          "linkId": "2ba61002-b642-4b28-9e66-dc2b060c4e0e",
                          "text": "mmol/L",
                          "type": "display"
                        }
                      ],
                      "linkId": "c14b4513-1e20-461d-97f4-4631711adc65",
                      "text": "Value",
                      "type": "decimal",
                      "repeats": false
                    },
                    {
                      "extension": [
                        {
                          "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                          "valueExpression": {
                            "language": "text/fhirpath",
                            "expression": "%ObsHDLCholesterolLatest.effective"
                          }
                        }
                      ],
                      "linkId": "6407e0a7-c416-4a75-933b-904c0dcf88ca",
                      "text": "Date performed",
                      "type": "date",
                      "repeats": false
                    }
                  ],
                  "linkId": "87eefaf6-010f-4b0d-9f51-2c33e46e6c69",
                  "text": "HDL Cholesterol",
                  "type": "group",
                  "repeats": false
                }
              ],
              "linkId": "fe9feec6-593a-4106-8a7d-f9965a632ea2",
              "text": "Observation values",
              "_text": {
                "extension": [
                  {
                    "url": "https://smartforms.csiro.au/ig/StructureDefinition/QuestionnaireItemTextHidden",
                    "valueBoolean": true
                  }
                ]
              },
              "type": "group",
              "repeats": false
            },
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-calculatedExpression",
                  "valueExpression": {
                    "description": "CVD Risk Postcode",
                    "language": "text/fhirpath",
                    "expression": "%postcode"
                  }
                }
              ],
              "linkId": "fa8f03ca-9a5a-4ed1-a866-db26e567352a",
              "text": "Postcode",
              "type": "string"
            },
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                  "valueExpression": {
                    "language": "text/fhirpath",
                    "expression": "%Condition.entry.resource.code.coding.where(system='http://snomed.info/sct' and code='44054006').exists()"
                  }
                }
              ],
              "linkId": "1c1eea28-6c82-4b7b-aaa3-8655ce70f2fd",
              "text": "Type 2 diabetes mellitus",
              "type": "boolean",
              "repeats": false
            }
          ],
          "linkId": "f8022f3f-21fe-42c0-8abd-95f24e2e37e5",
          "text": "Health priorities, actions and follow-up",
          "type": "text",
          "repeats": false,
          "readOnly": true,
          "enableWhen": [
            {
              "question": "cvdrisk-auscvdriskiaccess",
              "operator": "=",
              "answerBoolean": false
            }
          ]
        },
        {
          "linkId": "MarkComplete-2",
          "text": "Mark section as complete",
          "_text": {
            "extension": [
              {
                "url": "http://hl7.org/fhir/StructureDefinition/rendering-xhtml",
                "valueString": "<div xmlns=\"http://www.w3.org/1999/xhtml\">\r\n<head>\r\n    <style type=\"text/css\">\r\n        .alert {\r\n            padding: 0.875rem;\r\n            margin-bottom: 1rem;\r\n            font-size: 0.875rem;\r\n            color: #29712D;\r\n            border-radius: 0.5rem;\r\n            background-color: #D9E8DA;\r\n            font-weight: 700;\r\n        max-width: 205px;\r\n        }\r\n    </style>\r\n</head>\r\n<body>\r\n<div class=\"alert\">Mark section as complete</div>\r\n</body>\r\n</div>"
              }
            ]
          },
          "type": "boolean",
          "repeats": false
        }
      ],
      "linkId": "d95abe99-8ef2-4b97-bc88-a2901e2ebc9c",
      "text": "Absolute cardiovascular disease risk calculation",
      "type": "group",
      "repeats": false
    }
  ],
  "contained": [
    {
      "resourceType": "ValueSet",
      "id": "biological-sex-1",
      "meta": {
        "profile": [
          "http://hl7.org/fhir/StructureDefinition/shareablevalueset",
          "https://healthterminologies.gov.au/fhir/StructureDefinition/composed-value-set-4"
        ]
      },
      "status": "active",
      "name": "BiologicalSex",
      "title": "Biological Sex",
      "description": "The Biological Sex value set includes values that represent the biological sex of an individual.",
      "url": "https://healthterminologies.gov.au/fhir/ValueSet/biological-sex-1",
      "identifier": [
        {
          "system": "urn:ietf:rfc:3986",
          "value": "urn:oid:1.2.36.1.2001.1004.201.10198"
        }
      ],
      "version": "1.0.0",
      "experimental": false,
      "date": "2020-12-31",
      "publisher": "Australian Digital Health Agency",
      "contact": [
        {
          "telecom": [
            {
              "system": "email",
              "value": "help@digitalhealth.gov.au"
            }
          ]
        }
      ],
      "copyright": "Copyright © 2020 Australian Digital Health Agency - All rights reserved. Except for the material identified below, this content is licensed under a Creative Commons Attribution 4.0 International License. See https://creativecommons.org/licenses/by/4.0/. \n\nThis resource includes SNOMED Clinical Terms™ (SNOMED CT®) which is used by permission of the International Health Terminology Standards Development Organisation (IHTSDO). All rights reserved. SNOMED CT®, was originally created by The College of American Pathologists. “SNOMED” and “SNOMED CT” are registered trademarks of the IHTSDO. \n\nThe rights to use and implement or implementation of SNOMED CT content are limited to the extent it is necessary to allow for the end use of this material.  No further rights are granted in respect of the International Release and no further use of any SNOMED CT content by any other party is permitted. \n\nAll copies of this resource must include this copyright statement and all information contained in this statement.",
      "expansion": {
        "identifier": "urn:uuid:9a0c2291-6dd8-4778-9099-4622f64fa897",
        "timestamp": "2025-05-01T10:00:49+10:00",
        "offset": 0,
        "parameter": [
          {
            "name": "displayLanguage",
            "valueCode": "en-US"
          },
          {
            "name": "count",
            "valueInteger": 1000
          },
          {
            "name": "offset",
            "valueInteger": 0
          },
          {
            "name": "excludeNested",
            "valueBoolean": false
          },
          {
            "name": "used-valueset",
            "valueUri": "null"
          },
          {
            "name": "used-codesystem",
            "valueUri": "http://snomed.info/sct|http://snomed.info/sct/32506021000036107/version/20250430"
          },
          {
            "name": "version",
            "valueUri": "http://snomed.info/sct|http://snomed.info/sct/32506021000036107/version/20250430"
          }
        ],
        "contains": [
          {
            "system": "http://snomed.info/sct",
            "code": "248152002",
            "display": "Female"
          },
          {
            "system": "http://snomed.info/sct",
            "code": "32570681000036106",
            "display": "Indeterminate sex"
          },
          {
            "system": "http://snomed.info/sct",
            "code": "32570691000036108",
            "display": "Intersex"
          },
          {
            "system": "http://snomed.info/sct",
            "code": "248153007",
            "display": "Male"
          }
        ]
      },
      "compose": {
        "include": [
          {
            "system": "http://snomed.info/sct",
            "filter": [
              {
                "property": "constraint",
                "op": "=",
                "value": "^32570631000036107|Sex reference set|"
              }
            ]
          }
        ]
      }
    }
  ],
  "extension": [
    {
      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-assemble-expectation",
      "valueCode": "assemble-child"
    },
    {
      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-launchContext",
      "extension": [
        {
          "url": "name",
          "valueCoding": {
            "code": "patient",
            "system": "http://hl7.org/fhir/uv/sdc/CodeSystem/launchContext"
          }
        },
        {
          "url": "type",
          "valueCode": "Patient"
        },
        {
          "url": "description",
          "valueString": "The patient that is to be used to pre-populate the form"
        }
      ]
    },
    {
      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-launchContext",
      "extension": [
        {
          "url": "name",
          "valueCoding": {
            "code": "user",
            "system": "http://hl7.org/fhir/uv/sdc/CodeSystem/launchContext"
          }
        },
        {
          "url": "type",
          "valueCode": "Practitioner"
        },
        {
          "url": "description",
          "valueString": "The practitioner user that is to be used to pre-populate the form"
        }
      ]
    },
    {
      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-launchContext",
      "extension": [
        {
          "url": "name",
          "valueCoding": {
            "code": "encounter",
            "system": "http://hl7.org/fhir/uv/sdc/CodeSystem/launchContext"
          }
        },
        {
          "url": "type",
          "valueCode": "Encounter"
        },
        {
          "url": "description",
          "valueString": "The encounter that is to be used to pre-populate the form"
        }
      ]
    },
    {
      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-assembleContext",
      "valueString": "age"
    },
    {
      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-assembleContext",
      "valueString": "Condition"
    },
    {
      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-assembleContext",
      "valueString": "ObsBloodPressure"
    },
    {
      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-assembleContext",
      "valueString": "ObsBloodPressureLatest"
    },
    {
      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-assembleContext",
      "valueString": "SexAtBirthCoding"
    },
    {
      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-assembleContext",
      "valueString": "ObsTobaccoSmokingStatus"
    },
    {
      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-assembleContext",
      "valueString": "ObsTobaccoSmokingStatusLatest"
    },
    {
      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-assembleContext",
      "valueString": "postcode"
    },
    {
      "url": "http://hl7.org/fhir/StructureDefinition/variable",
      "valueExpression": {
        "name": "ObsTotalCholesterol",
        "language": "application/x-fhir-query",
        "expression": "Observation?code=14647-2&_sort=-date&patient={{%patient.id}}"
      }
    },
    {
      "url": "http://hl7.org/fhir/StructureDefinition/variable",
      "valueExpression": {
        "name": "ObsHDLCholesterol",
        "language": "application/x-fhir-query",
        "expression": "Observation?code=14646-4&_sort=-date&patient={{%patient.id}}"
      }
    },
    {
      "url": "http://hl7.org/fhir/StructureDefinition/variable",
      "valueExpression": {
        "name": "ObsTotalCholesterolLatest",
        "language": "text/fhirpath",
        "expression": "%ObsTotalCholesterol.entry.resource.where(status = 'final' or status = 'amended' or status = 'corrected').first()"
      }
    },
    {
      "url": "http://hl7.org/fhir/StructureDefinition/variable",
      "valueExpression": {
        "name": "ObsHDLCholesterolLatest",
        "language": "text/fhirpath",
        "expression": "%ObsHDLCholesterol.entry.resource.where(status = 'final' or status = 'amended' or status = 'corrected').first()"
      }
    },
    {
      "url": "http://hl7.org/fhir/StructureDefinition/variable",
      "valueExpression": {
        "name": "CVDRiskResult",
        "language": "application/x-fhir-query",
        "expression": "Observation?code=441829007&_sort=-date&patient={{%patient.id}}"
      }
    },
    {
      "url": "http://hl7.org/fhir/StructureDefinition/variable",
      "valueExpression": {
        "name": "CVDRiskResultLatest",
        "language": "text/fhirpath",
        "expression": "%CVDRiskResult.entry.resource.where(status = 'final' or status = 'amended' or status = 'corrected').first()"
      }
    },
    {
      "url": "http://hl7.org/fhir/StructureDefinition/variable",
      "valueExpression": {
        "name": "CVDRiskResultValue",
        "language": "text/fhirpath",
        "expression": "%CVDRiskResultLatest.select((((value.ofType(Quantity).comparator + value.ofType(Quantity).value.toString() + value.ofType(Quantity).unit | value.ofType(Quantity).value.toString() + value.ofType(Quantity).unit).first() | (value.ofType(Range).low.value.toString() + ' - ' + value.ofType(Range).high.value.toString() + value.ofType(Range).high.unit)).first()) + ' ' + interpretation.coding.display)"
      }
    },
    {
      "url": "http://hl7.org/fhir/StructureDefinition/variable",
      "valueExpression": {
        "name": "CVDRiskResultDateString",
        "language": "text/fhirpath",
        "expression": "%CVDRiskResultLatest.effective.toString()"
      }
    },
    {
      "url": "http://hl7.org/fhir/StructureDefinition/variable",
      "valueExpression": {
        "name": "CVDRiskResultDateFormatted",
        "language": "text/fhirpath",
        "expression": "%CVDRiskResultDateString.substring(8,2).toInteger().toString() + ' ' + %CVDRiskResultDateString.substring(5,2).replace('01','Jan').replace('02','Feb').replace('03','Mar').replace('04','Apr').replace('05','May').replace('06','Jun').replace('07','Jul').replace('08','Aug').replace('09','Sep').replace('10','Oct').replace('11','Nov').replace('12','Dec') + ' ' + %CVDRiskResultDateString.substring(0,4)"
      }
    },
    {
      "url": "http://hl7.org/fhir/StructureDefinition/variable",
      "valueExpression": {
        "name": "NewAssessmentQuestionAnswer",
        "language": "text/fhirpath",
        "expression": "repeat(item).where(linkId='cvdrisk-newassessmentquestion').answer.value"
      }
    },
    {
      "url": "http://hl7.org/fhir/StructureDefinition/variable",
      "valueExpression": {
        "name": "AusCVDRiskiAccessAnswer",
        "language": "text/fhirpath",
        "expression": "repeat(item).where(linkId='cvdrisk-auscvdriskiaccess').answer.value"
      }
    },
    {
      "url": "http://hl7.org/fhir/StructureDefinition/variable",
      "valueExpression": {
        "name": "RepopulateOverrideAnswer",
        "language": "text/fhirpath",
        "expression": "repeat(item).where(linkId='cvdrisk-repopulateoverride').answer.value"
      }
    },
    {
      "url": "http://hl7.org/fhir/5.0/StructureDefinition/extension-Questionnaire.versionAlgorithm[x]",
      "valueCoding": {
        "system": "http://hl7.org/fhir/version-algorithm",
        "code": "semver"
      }
    }
  ],
  "url": "http://www.health.gov.au/assessments/mbs/715/AbsoluteCVDRiskCalculation",
  "name": "AbsoluteCVDRiskCalculation",
  "title": "Aboriginal and Torres Strait Islander Health Check - Absolute Cardiovascular Disease Risk Calculation",
  "status": "draft",
  "experimental": false,
  "subjectType": [
    "Patient"
  ],
  "date": "2025-03-14",
  "jurisdiction": [
    {
      "coding": [
        {
          "code": "AU",
          "system": "urn:iso:std:iso:3166"
        }
      ]
    }
  ]
}
