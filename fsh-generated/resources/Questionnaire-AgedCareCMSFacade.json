{
  "resourceType": "Questionnaire",
  "id": "AgedCareCMSFacade",
  "meta": {
    "profile": [
      "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-render",
      "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-pop-exp"
    ]
  },
  "url": "https://smartforms.csiro.au/ig/Questionnaire/AgedCareCMSFacade",
  "title": "Aged Care CMS Facade",
  "description": "Aged Care CMS Facade.",
  "extension": [
    {
      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-launchContext",
      "extension": [
        {
          "url": "name",
          "valueCoding": {
            "code": "patient",
            "system": "http://hl7.org/fhir/uv/sdc/CodeSystem/launchContext"
          }
        },
        {
          "url": "type",
          "valueCode": "Patient"
        },
        {
          "url": "description",
          "valueString": "The patient that is to be used to pre-populate the form"
        }
      ]
    },
    {
      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-launchContext",
      "extension": [
        {
          "url": "name",
          "valueCoding": {
            "code": "user",
            "system": "http://hl7.org/fhir/uv/sdc/CodeSystem/launchContext"
          }
        },
        {
          "url": "type",
          "valueCode": "Practitioner"
        },
        {
          "url": "description",
          "valueString": "The practitioner user that is to be used to pre-populate the form"
        }
      ]
    },
    {
      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-launchContext",
      "extension": [
        {
          "url": "name",
          "valueCoding": {
            "code": "encounter",
            "system": "http://hl7.org/fhir/uv/sdc/CodeSystem/launchContext"
          }
        },
        {
          "url": "type",
          "valueCode": "Encounter"
        },
        {
          "url": "description",
          "valueString": "The encounter that is to be used to pre-populate the form"
        }
      ]
    },
    {
      "url": "http://hl7.org/fhir/StructureDefinition/variable",
      "valueExpression": {
        "name": "EncounterAll",
        "language": "application/x-fhir-query",
        "expression": "Encounter?patient={{%patient.id}}"
      }
    },
    {
      "url": "http://hl7.org/fhir/StructureDefinition/variable",
      "valueExpression": {
        "name": "Weight",
        "language": "application/x-fhir-query",
        "expression": "Observation?code=29463-7&patient={{%patient.id}}"
      }
    },
    {
      "url": "http://hl7.org/fhir/StructureDefinition/variable",
      "valueExpression": {
        "name": "ProblemListItem",
        "language": "application/x-fhir-query",
        "expression": "Condition?category=problem-list-item&patient={{%patient.id}}"
      }
    }
  ],
  "name": "AgedCareCMSFacade",
  "status": "draft",
  "experimental": true,
  "subjectType": [
    "Patient"
  ],
  "date": "2023-11-27",
  "jurisdiction": [
    {
      "coding": [
        {
          "code": "AU",
          "system": "urn:iso:std:iso:3166"
        }
      ]
    }
  ],
  "item": [
    {
      "extension": [
        {
          "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
          "valueCodeableConcept": {
            "coding": [
              {
                "code": "tab-container",
                "system": "http://hl7.org/fhir/questionnaire-item-control"
              }
            ]
          }
        }
      ],
      "linkId": "tab-container",
      "type": "group",
      "repeats": false,
      "item": [
        {
          "linkId": "patient",
          "text": "Patient",
          "type": "group",
          "repeats": false,
          "item": [
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                  "valueExpression": {
                    "language": "text/fhirpath",
                    "expression": "%patient.identifier.where(type.coding.exists(system='http://terminology.hl7.org/CodeSystem/v2-0203' and code='MR')).value"
                  }
                }
              ],
              "linkId": "patient-mrn",
              "text": "MRN identifier",
              "type": "string",
              "repeats": false
            },
            {
              "linkId": "patient-name",
              "text": "Legal name",
              "type": "group",
              "repeats": false,
              "item": [
                {
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "%patient.name.where(use='official').select(family)"
                      }
                    }
                  ],
                  "linkId": "patient-name-family",
                  "text": "Family name",
                  "type": "string",
                  "repeats": false
                },
                {
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "%patient.name.where(use='official').select(given[0])"
                      }
                    }
                  ],
                  "linkId": "patient-name-given",
                  "text": "First given name",
                  "type": "string",
                  "repeats": false
                },
                {
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "%patient.name.where(use='official').select(given.skip(1)).join(' ')"
                      }
                    }
                  ],
                  "linkId": "patient-name-additional-given",
                  "text": "Additional given names",
                  "type": "string",
                  "repeats": false
                },
                {
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "%patient.name.where(use='official').select(prefix).join(' ')"
                      }
                    }
                  ],
                  "linkId": "patient-name-prefix",
                  "text": "Name prefix",
                  "type": "string",
                  "repeats": false
                },
                {
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "%patient.name.where(use='usual').select(given[0])"
                      }
                    }
                  ],
                  "linkId": "patient-name-preferred",
                  "text": "Preferred name",
                  "type": "string",
                  "repeats": false
                }
              ]
            },
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                  "valueExpression": {
                    "language": "text/fhirpath",
                    "expression": "%patient.gender"
                  }
                }
              ],
              "linkId": "patient-gender",
              "text": "Administrative gender",
              "type": "choice",
              "repeats": false,
              "answerValueSet": "http://hl7.org/fhir/ValueSet/administrative-gender"
            },
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                  "valueExpression": {
                    "language": "text/fhirpath",
                    "expression": "%patient.birthDate"
                  }
                }
              ],
              "linkId": "patient-dob",
              "text": "Date of birth",
              "type": "date",
              "repeats": false
            },
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                  "valueExpression": {
                    "language": "text/fhirpath",
                    "expression": "%patient.deceased.ofType(Boolean)"
                  }
                }
              ],
              "linkId": "patient-deceased",
              "text": "Deceased indicator",
              "type": "boolean",
              "repeats": false
            },
            {
              "linkId": "patient-facility",
              "text": "Facility managing patient record",
              "type": "group",
              "repeats": false,
              "item": [
                {
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "%patient.managingOrganization.display"
                      }
                    }
                  ],
                  "linkId": "patient-facility-name",
                  "text": "Managing organisation name",
                  "type": "string",
                  "repeats": false
                },
                {
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "%patient.managingOrganization.identifier.value"
                      }
                    }
                  ],
                  "linkId": "patient-facility-identifier",
                  "text": "Managing organization facility identifier assigned by Services Australia",
                  "type": "string",
                  "repeats": false
                }
              ]
            }
          ]
        },
        {
          "linkId": "practitioner",
          "text": "Practitioner",
          "type": "group",
          "repeats": false,
          "item": [
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                  "valueExpression": {
                    "language": "text/fhirpath",
                    "expression": "%user.identifier.where(type.coding.exists(system='http://terminology.hl7.org/CodeSystem/v2-0203' and code='EI')).value"
                  }
                }
              ],
              "linkId": "practitioner-employee-number",
              "text": "Employee number",
              "type": "string",
              "repeats": false
            },
            {
              "linkId": "practitioner-name",
              "text": "Legal name",
              "type": "group",
              "repeats": false,
              "item": [
                {
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "%user.name.where(use='official').select(family)"
                      }
                    }
                  ],
                  "linkId": "practitioner-name-family",
                  "text": "Family name",
                  "type": "string",
                  "repeats": false
                },
                {
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "%user.name.where(use='official').select(given[0])"
                      }
                    }
                  ],
                  "linkId": "practitioner-name-given",
                  "text": "First given name",
                  "type": "string",
                  "repeats": false
                },
                {
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "%user.name.where(use='official').select(given.skip(1)).join(' ')"
                      }
                    }
                  ],
                  "linkId": "practitioner-name-additional-given",
                  "text": "Additional given names",
                  "type": "string",
                  "repeats": false
                },
                {
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "%user.name.where(use='official').select(prefix).join(' ')"
                      }
                    }
                  ],
                  "linkId": "practitioner-name-prefix",
                  "text": "Name prefix",
                  "type": "string",
                  "repeats": false
                }
              ]
            }
          ]
        },
        {
          "linkId": "encounter",
          "text": "Encounter",
          "type": "group",
          "repeats": false,
          "item": [
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                  "valueExpression": {
                    "language": "text/fhirpath",
                    "expression": "%encounter.extension.where(url='http://hl7.org.au/fhir/StructureDefinition/encounter-description').value"
                  }
                }
              ],
              "linkId": "encounter-description",
              "text": "Text description of encounter",
              "type": "text",
              "repeats": false
            },
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                  "valueExpression": {
                    "language": "text/fhirpath",
                    "expression": "%encounter.class"
                  }
                },
                {
                  "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                  "valueCodeableConcept": {
                    "coding": [
                      {
                        "code": "drop-down",
                        "system": "http://hl7.org/fhir/questionnaire-item-control"
                      }
                    ]
                  }
                }
              ],
              "linkId": "encounter-class",
              "text": "Class",
              "type": "choice",
              "repeats": false,
              "answerOption": [
                {
                  "valueCoding": {
                    "code": "RACF",
                    "system": "http://terminology.hl7.org.au/CodeSystem/v3-ActCode"
                  }
                }
              ]
            },
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                  "valueExpression": {
                    "language": "text/fhirpath",
                    "expression": "%encounter.status"
                  }
                },
                {
                  "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                  "valueCodeableConcept": {
                    "coding": [
                      {
                        "code": "drop-down",
                        "system": "http://hl7.org/fhir/questionnaire-item-control"
                      }
                    ]
                  }
                }
              ],
              "linkId": "encounter-status",
              "text": "Status",
              "type": "choice",
              "repeats": false,
              "answerOption": [
                {
                  "valueCoding": {
                    "code": "in-progress",
                    "system": "http://hl7.org/fhir/encounter-status",
                    "display": "In Progress"
                  }
                },
                {
                  "valueCoding": {
                    "code": "onleave",
                    "system": "http://hl7.org/fhir/encounter-status",
                    "display": "On Leave"
                  }
                },
                {
                  "valueCoding": {
                    "code": "finished",
                    "system": "http://hl7.org/fhir/encounter-status",
                    "display": "Finished"
                  }
                }
              ]
            },
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                  "valueExpression": {
                    "language": "text/fhirpath",
                    "expression": "%encounter.period.start"
                  }
                }
              ],
              "linkId": "encounter-periodstart",
              "text": "Period start",
              "type": "date",
              "repeats": false
            },
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                  "valueExpression": {
                    "language": "text/fhirpath",
                    "expression": "%encounter.period.end"
                  }
                }
              ],
              "linkId": "encounter-periodend",
              "text": "Period end",
              "type": "date",
              "repeats": false
            },
            {
              "linkId": "encounter-statushistory",
              "text": "Status history",
              "type": "group",
              "repeats": true,
              "item": [
                {
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "%encounter.statusHistory.status"
                      }
                    },
                    {
                      "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                      "valueCodeableConcept": {
                        "coding": [
                          {
                            "code": "drop-down",
                            "system": "http://hl7.org/fhir/questionnaire-item-control"
                          }
                        ]
                      }
                    }
                  ],
                  "linkId": "encounter-statushistory-status",
                  "text": "Status",
                  "type": "choice",
                  "repeats": false,
                  "answerOption": [
                    {
                      "valueCoding": {
                        "code": "in-progress",
                        "system": "http://hl7.org/fhir/encounter-status",
                        "display": "In Progress"
                      }
                    },
                    {
                      "valueCoding": {
                        "code": "onleave",
                        "system": "http://hl7.org/fhir/encounter-status",
                        "display": "On Leave"
                      }
                    }
                  ]
                },
                {
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "%encounter.statusHistory.period.start"
                      }
                    }
                  ],
                  "linkId": "encounter-statushistory-periodstart",
                  "text": "Period start",
                  "type": "date",
                  "repeats": false
                },
                {
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "%encounter.statusHistory.period.end"
                      }
                    }
                  ],
                  "linkId": "encounter-statushistory-periodend",
                  "text": "Period end",
                  "type": "date",
                  "repeats": false
                }
              ]
            },
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                  "valueExpression": {
                    "language": "text/fhirpath",
                    "expression": "%encounter.reasonCode.coding"
                  }
                },
                {
                  "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                  "valueCodeableConcept": {
                    "coding": [
                      {
                        "code": "drop-down",
                        "system": "http://hl7.org/fhir/questionnaire-item-control"
                      }
                    ]
                  }
                }
              ],
              "linkId": "encounter-reason",
              "text": "Reason",
              "type": "choice",
              "repeats": true,
              "answerOption": [
                {
                  "valueCoding": {
                    "code": "410201001",
                    "system": "http://snomed.info/sct",
                    "display": "Weight maintenance regimen management"
                  }
                },
                {
                  "valueCoding": {
                    "code": "103735009",
                    "system": "http://snomed.info/sct",
                    "display": "Palliative care"
                  }
                },
                {
                  "valueCoding": {
                    "code": "423216003",
                    "system": "http://snomed.info/sct",
                    "display": "End-of-life surveillance"
                  }
                }
              ]
            },
            {
              "linkId": "encounter-serviceprovider",
              "text": "Facility managing encounter",
              "type": "group",
              "repeats": false,
              "item": [
                {
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "%encounter.serviceProvider.display"
                      }
                    }
                  ],
                  "linkId": "encounter-serviceprovider-name",
                  "text": "Organisation name",
                  "type": "string",
                  "repeats": false
                },
                {
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "%encounter.serviceProvider.identifier.value"
                      }
                    }
                  ],
                  "linkId": "encounter-serviceprovider-identifier",
                  "text": "Organization facility identifier assigned by Services Australia",
                  "type": "string",
                  "repeats": false
                }
              ]
            }
          ]
        },
        {
          "linkId": "hospitalisation",
          "text": "Hospitalisation",
          "type": "group",
          "repeats": false,
          "item": [
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-itemPopulationContext",
                  "valueExpression": {
                    "name": "HospitalisationRepeat",
                    "language": "text/fhirpath",
                    "expression": "%EncounterAll.entry.resource.where(class='IMP' or class='EMER' or class='SS')"
                  }
                }
              ],
              "linkId": "hospitalisation-encounter",
              "text": "Hospitalisation encounter",
              "type": "group",
              "repeats": true,
              "item": [
                {
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "%EncounterAll.extension.where(url='http://hl7.org.au/fhir/StructureDefinition/encounter-description').value"
                      }
                    }
                  ],
                  "linkId": "hospitalisation-encounter-description",
                  "text": "Text description of encounter",
                  "type": "string",
                  "repeats": false
                },
                {
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "%EncounterAll.class"
                      }
                    }
                  ],
                  "linkId": "hospitalisation-encounter-class",
                  "text": "Class",
                  "type": "choice",
                  "repeats": false,
                  "answerOption": [
                    {
                      "valueCoding": {
                        "code": "IMP",
                        "system": "http://terminology.hl7.org.au/CodeSystem/v3-ActCode"
                      }
                    },
                    {
                      "valueCoding": {
                        "code": "EMER",
                        "system": "http://terminology.hl7.org.au/CodeSystem/v3-ActCode"
                      }
                    },
                    {
                      "valueCoding": {
                        "code": "SS",
                        "system": "http://terminology.hl7.org.au/CodeSystem/v3-ActCode"
                      }
                    }
                  ]
                },
                {
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "%EncounterAll.status"
                      }
                    }
                  ],
                  "linkId": "hospitalisation-encounter-status",
                  "text": "Status",
                  "type": "choice",
                  "repeats": false,
                  "answerOption": [
                    {
                      "valueCoding": {
                        "code": "in-progress",
                        "system": "http://hl7.org/fhir/encounter-status",
                        "display": "In Progress"
                      }
                    },
                    {
                      "valueCoding": {
                        "code": "onleave",
                        "system": "http://hl7.org/fhir/encounter-status",
                        "display": "On Leave"
                      }
                    }
                  ]
                },
                {
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "%EncounterAll.period.start"
                      }
                    }
                  ],
                  "linkId": "hospitalisation-encounter-periodstart",
                  "text": "Period start",
                  "type": "date",
                  "repeats": false
                },
                {
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "%EncounterAll.period.end"
                      }
                    }
                  ],
                  "linkId": "hospitalisation-encounter-periodend",
                  "text": "Period end",
                  "type": "date",
                  "repeats": false
                },
                {
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "%EncounterAll.where(class='IMP').length.value"
                      }
                    },
                    {
                      "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-unit",
                      "valueCoding": {
                        "code": "d",
                        "system": "http://unitsofmeasure.org"
                      }
                    }
                  ],
                  "linkId": "hospitalisation-encounter-duration",
                  "text": "Duration",
                  "type": "decimal",
                  "repeats": false,
                  "item": [
                    {
                      "extension": [
                        {
                          "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                          "valueCodeableConcept": {
                            "coding": [
                              {
                                "code": "unit",
                                "system": "http://hl7.org/fhir/questionnaire-item-control"
                              }
                            ]
                          }
                        }
                      ],
                      "linkId": "hospitalisation-encounter-duration-unit",
                      "text": "days",
                      "type": "display"
                    }
                  ]
                },
                {
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "%EncounterAll.reasonCode.text"
                      }
                    }
                  ],
                  "linkId": "hospitalisation-encounter-reason",
                  "text": "Reason",
                  "type": "string",
                  "repeats": false
                },
                {
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "%EncounterAll.serviceProvider.reference"
                      }
                    }
                  ],
                  "linkId": "hospitalisation-encounter-serviceprovider",
                  "text": "Facility managing encounter (id only)",
                  "type": "string",
                  "repeats": false
                }
              ]
            }
          ]
        },
        {
          "linkId": "medicalhistory",
          "text": "Medical History",
          "type": "group",
          "repeats": false,
          "item": [
            {
              "extension": [
                {
                  "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                  "valueCodeableConcept": {
                    "coding": [
                      {
                        "code": "gtable",
                        "system": "http://hl7.org/fhir/questionnaire-item-control"
                      }
                    ]
                  }
                },
                {
                  "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-itemPopulationContext",
                  "valueExpression": {
                    "name": "ProblemListItemRepeat",
                    "language": "text/fhirpath",
                    "expression": "%ProblemListItem.entry.resource"
                  }
                }
              ],
              "linkId": "medicalhistory-condition",
              "text": "Problem List Condition",
              "type": "group",
              "repeats": true,
              "item": [
                {
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                      "valueCodeableConcept": {
                        "coding": [
                          {
                            "code": "drop-down",
                            "system": "http://hl7.org/fhir/questionnaire-item-control"
                          }
                        ]
                      }
                    },
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "%ProblemListItemRepeat.code.coding"
                      }
                    }
                  ],
                  "linkId": "medicalhistory-condition-code",
                  "text": "Condition code",
                  "type": "choice",
                  "answerValueSet": "https://healthterminologies.gov.au/fhir/ValueSet/clinical-condition-1",
                  "repeats": false
                },
                {
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "%ProblemListItemRepeat.code.text"
                      }
                    }
                  ],
                  "linkId": "medicalhistory-condition-text",
                  "text": "Condition text",
                  "type": "string",
                  "repeats": false
                },
                {
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                      "valueCodeableConcept": {
                        "coding": [
                          {
                            "code": "drop-down",
                            "system": "http://hl7.org/fhir/questionnaire-item-control"
                          }
                        ]
                      }
                    },
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "%ProblemListItemRepeat.status"
                      }
                    }
                  ],
                  "linkId": "medicalhistory-condition-status",
                  "text": "Status",
                  "type": "choice",
                  "repeats": false,
                  "answerValueSet": "http://hl7.org/fhir/ValueSet/condition-clinical"
                },
                {
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "%ProblemListItemRepeat.onset.ofType(dateTime)"
                      }
                    }
                  ],
                  "linkId": "medicalhistory-condition-onsetdate",
                  "text": "Onset date",
                  "type": "date",
                  "repeats": false
                },
                {
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "%ProblemListItemRepeat.abatement.ofType(dateTime)"
                      }
                    }
                  ],
                  "linkId": "medicalhistory-condition-abatementdate",
                  "text": "Abatement date",
                  "type": "date",
                  "repeats": false
                },
                {
                  "extension": [
                    {
                      "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
                      "valueExpression": {
                        "language": "text/fhirpath",
                        "expression": "%ProblemListItemRepeat.recordedDate"
                      }
                    }
                  ],
                  "linkId": "medicalhistory-condition-recordeddate",
                  "text": "Recorded date",
                  "type": "date",
                  "repeats": false
                }
              ]
            }
          ]
        }
      ]
    }
  ]
}
